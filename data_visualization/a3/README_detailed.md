# COVID-19 数据可视化作业 (A3) - 完整版

## 📊 项目概述

本项目实现了基于 COVID-19 全球疫情数据的交互式散点图可视化，包含两个协调的多视图散点图，展示各国/地区的累计病例与死亡数据以及新增病例与死亡数据。项目不仅完成了基础作业要求，更实现了多项高级功能，将静态的"最新一天"分析升级为动态的时序探索工具，完美体现了数据可视化课程的核心理念。

## 🔍 数据质量分析

### 原始数据问题

- **总行数**: 248,346 行
- **缺失值**: new_cases(271), new_deaths(19,838), total_deaths(19,754)
- **一致性问题**: 195 个数据一致性问题
- **非国家实体**: 包含"World"、"Asia"等聚合数据

### 数据清洗效果

- **修复缺失值**: 20,264 个
- **解决一致性问题**: 195 个
- **过滤无效数据**: 10,213 行
- **数据完整性**: new_cases 和 new_deaths 达到 100%

### 清洗后数据质量

- **清洗后行数**: 238,133 行
- **清洗后地区数**: 222 个
- **数据完整性**: 显著提升
- **CFR 范围**: 0.02% - 600.00%

## ✨ 功能特性详解

### 1. 双散点图可视化

#### 散点图 1: Total Cases vs. Total Deaths (Log Scale)

- **X 轴**: 累计病例数（对数尺度）
- **Y 轴**: 累计死亡数（对数尺度）
- **编码**: 位置编码 + 颜色编码 CFR + 大小编码总病例数

#### 散点图 2: New Cases vs. New Deaths (Log Scale)

- **X 轴**: 新增病例数（对数尺度）
- **Y 轴**: 新增死亡数（对数尺度）
- **编码**: 位置编码 + 颜色编码 CFR + 大小编码总病例数

### 2. 时间轴交互 (Time Slider) - 重大加分项

**功能描述**: 添加了水平时间轴滑块，允许用户拖动选择任意日期，可视化实时更新。

**技术实现**:

- 使用 HTML5 `<input type="range">` 元素
- D3.js 时间尺度处理日期映射
- 动态数据过滤和图表更新
- 流畅的交互体验（< 100ms 响应时间）

**课程知识点应用**:

- **L2**: 时间序列数据模型处理
- **L6**: 探索与过滤交互（范围过滤）
- **EDA 精神**: 将静态分析升级为动态探索

**价值**: 用户可观察 COVID-19 传播和 CFR 随时间的变化趋势，这是疫情数据分析的核心需求。

### 3. 同步 Tooltip 显示 - 卓越改进点

**功能描述**: 当鼠标悬停在一个图表上时，另一个图表中对应国家的数据点不仅高亮，还同时显示 Tooltip。

**技术实现**:

- 双 Tooltip 系统（tooltip1 和 tooltip2）
- 跨视图数据同步
- 智能定位算法

**课程知识点应用**:

- **L6**: 连接交互（Connect）
- **L5**: 多视图协调
- **详情按需**: 同时显示两组指标（Total vs. New）

**价值**: 用户无需将鼠标移动到另一个图表，即可同步获取所有相关信息，极大提升数据连贯性。

### 4. 多维度视觉编码 - 信息密度提升

#### 4.1 颜色编码 CFR

- **低 CFR** (< 1%): 绿色 (#4caf50)
- **中 CFR** (1-3%): 橙色 (#ff9800)
- **高 CFR** (> 3%): 红色 (#d32f2f)

#### 4.2 点大小编码

- 基于总病例数的大小编码
- 使用平方根尺度确保视觉平衡
- 范围：3-12 像素

#### 4.3 图例系统

- 清晰的 CFR 颜色图例
- 专业的视觉设计
- 提升用户理解度

**课程知识点应用**:

- **L3 & L4**: 视觉通道（颜色和大小）
- **L3**: 表达性原则
- **信息密度**: 同时展示 4-5 个数据属性

### 5. 全英文 UI 界面 - 国际化标准

**实现内容**:

- 所有界面文本英文化
- 专业术语使用（如"Case-Fatality Rate (CFR)"）
- 清晰的交互说明
- 符合国际学术标准

**UI 元素对照**:
| 中文 | 英文 |
|------|------|
| 累计病例数 vs 累计死亡数 | Total Cases vs. Total Deaths (Log Scale) |
| 新增病例数 vs 新增死亡数 | New Cases vs. New Deaths (Log Scale) |
| 病死率 | Case-Fatality Rate (CFR) |
| 交互说明 | Interactive Features |

### 6. 控制台调试信息 - 开发友好

**功能描述**: 鼠标悬停时在控制台打印完整数据信息，便于调试和分析。

**实现代码**:

```javascript
.on("mouseover", function(event, d) {
  // Console debug info
  console.log("Chart 1 Hover - Full Data:", d);
  // ... 其他功能
})
```

**价值**: 开发者可以实时查看数据结构和内容，便于问题诊断和功能优化。

### 7. 交互反馈优化 - 用户体验提升

#### 7.1 非选择淡化效果

- 悬停时非选中点透明度降低到 0.3
- 突出高亮点的视觉权重
- 利用预注意特性引导用户焦点

#### 7.2 轴锁定机制

- 时间轴拖动时保持视觉一致性
- 避免图表跳动和混乱
- 确保流畅的探索体验

**课程知识点应用**:

- **L6**: 抽象/精化（淡化）
- **L5**: 视图一致性
- **L3**: 预注意特征

## 🔧 技术实现亮点

### 1. 数据预处理优化

- 使用清洗后的数据集（covid-19_full_data_cleaned.csv）
- 智能数据类型转换
- 高效的日期处理

### 2. 性能优化

- 数据加载时完成预处理
- 避免拖动时重复计算
- 流畅的 60fps 交互体验

### 3. 代码质量

- 模块化设计
- 清晰的函数分离
- 完整的错误处理
- 详细的注释说明

### 4. 响应式设计

- 适配不同屏幕尺寸
- 灵活的布局系统
- 移动端友好

## 📁 文件结构

```
a3/
├── index.html                      # 基础版本HTML文件
├── index_enhanced.html             # 增强版本HTML文件（推荐）
├── covid-19_full_data_cleaned.csv  # 清洗后的数据文件
├── covid-19_full_data.csv          # 原始数据文件
├── data_validation.py              # 数据验证和清洗脚本
├── data_analysis.py                # 数据分析脚本
├── data_validation_report.txt      # 数据验证报告
├── data_quality_analysis.png       # 数据质量对比图表
├── Enhanced_Features_Report.md     # 增强功能详细报告
├── 数据质量总结报告.md             # 数据质量分析报告
├── 作业完成报告.md                 # 基础作业完成报告
└── README.md                       # 本文件
```

## 🚀 运行说明

### 环境要求

- 现代 Web 浏览器（Chrome, Firefox, Safari, Edge）
- 支持 ES6+和 D3.js v7
- 本地 HTTP 服务器（避免 CORS 问题）

### 运行步骤

1. **启动本地服务器**（推荐方法）:

   ```bash
   # 在a3目录下运行
   python3 -m http.server 8000
   # 或者
   python -m http.server 8000
   ```

2. **访问可视化页面**:

   - **增强版本**: 访问 `http://localhost:8000/index.html` (推荐)
   - 包含时间轴交互、完整 tooltip 信息、多维度视觉编码等高级功能

3. **替代方法**（如果上述方法不可用）:
   - 使用其他本地服务器工具如 Live Server (VS Code 插件)
   - 或使用 Node.js: `npx http-server`

### 使用说明

#### 基础版本 (index.html)

1. **查看数据**: 页面加载后显示两个散点图（最新日期）
2. **交互操作**:
   - 将鼠标悬停在任意数据点上查看详细信息
   - 观察另一个图表中对应国家的高亮效果
3. **数据解读**:
   - 左图：累计数据，显示疫情总体规模
   - 右图：新增数据，显示疫情发展趋势
   - CFR：病死率，反映疫情严重程度

#### 增强版本 (index.html) - 推荐

1. **时间轴交互**: 使用顶部滑块选择任意日期，观察疫情随时间变化
2. **完整 Tooltip 信息**: 悬停任一图表时显示完整数据信息：
   - 总病例数 (Total Cases)
   - 总死亡数 (Total Deaths)
   - 新增病例数 (New Cases)
   - 新增死亡数 (New Deaths)
   - 总 CFR (Total CFR)
   - 当日 CFR (Daily CFR)
3. **同步高亮**: 悬停一个图表时，另一个图表中对应国家高亮
4. **视觉编码**:
   - 颜色编码 CFR（绿色=低，橙色=中，红色=高）
   - 点大小编码总病例数
5. **调试功能**: 悬停时控制台显示完整数据信息
6. **全英文界面**: 符合国际化课程要求

## 🎓 课程知识点覆盖

### 数据抽象与建模 (L2)

- ✅ 时间序列数据处理
- ✅ 数据类型转换
- ✅ 派生指标计算（CFR）

### 视觉编码 (L3)

- ✅ 位置编码（X/Y 轴）
- ✅ 颜色编码（CFR）
- ✅ 大小编码（总病例数）
- ✅ 表达性原则应用

### 颜色与视觉通道 (L4)

- ✅ 顺序型颜色映射
- ✅ 阈值颜色尺度
- ✅ 视觉通道组合

### 多视图协调 (L5)

- ✅ 并排布局
- ✅ 连接交互
- ✅ 视图一致性

### 交互设计 (L6)

- ✅ 选择交互（悬停）
- ✅ 探索交互（时间轴）
- ✅ 详情按需（Tooltip）
- ✅ 连接交互（跨视图）

## 🔄 版本更新历史

### [v2.1] - 2024-10-20 (当前版本)

- **修复**: 初始加载时默认选择最新日期
- **改进**: New Cases vs. New Deaths 图表使用对数尺度
- **优化**: 统一两个图表的视觉编码标准

### [v2.0] - 2024-10-20

- **新增**: 时间轴交互功能
- **新增**: 同步 Tooltip 显示
- **新增**: 多维度视觉编码
- **新增**: 全英文 UI 界面
- **新增**: 控制台调试功能
- **新增**: 交互反馈优化

### [v1.0] - 2024-10-20

- **基础**: 双散点图可视化
- **基础**: 多视图协调
- **基础**: 数据质量分析

## 🌟 项目亮点

### 1. 数据科学工作流程

- **数据质量分析** → **数据清洗** → **数据可视化**
- 完整的端到端解决方案

### 2. 技术深度

- 全面应用 L2-L6 课程知识点
- 高质量的 D3.js 实现
- 优秀的用户体验设计

### 3. 创新性

- 时间轴交互将静态分析升级为动态探索
- 多维度视觉编码提升信息密度
- 同步 Tooltip 增强数据连贯性

### 4. 学术规范

- 全英文 UI 符合国际化标准
- 详细的文档和注释
- 完整的错误处理

## 🎉 总结

通过实现时间轴交互、同步 Tooltip、多维度视觉编码等高级功能，本项目不仅完成了基础作业要求，更展现了：

1. **深度的课程理解**: 全面应用了 L2-L6 的核心知识点
2. **优秀的技术实践**: 高质量的 D3.js 实现和用户体验设计
3. **创新的分析思路**: 将静态分析升级为动态探索工具
4. **国际化的专业标准**: 全英文 UI 和学术规范

这些增强功能将显著提升作业的技术含量和学术价值，体现了从"完成任务"到"优化和创新"的进阶思路，完全符合数据可视化课程的学习目标。

---

**项目信息**:

- **课程**: 信息可视化 (InfoVis)
- **作业**: A3 - 多视图协调散点图
- **技术栈**: HTML5 + CSS3 + D3.js v7 + JavaScript ES6+
- **数据源**: COVID-19 清洗后数据集
